<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Alexandre Thiéry - Probability Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../../data/dice.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HJ0JLEF802"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HJ0JLEF802', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Alexandre Thiéry - Probability Basics">
<meta property="og:site-name" content="Alexandre Thiéry">
<meta name="twitter:title" content="Alexandre Thiéry - Probability Basics">
<meta name="twitter:creator" content="@alexxthiery">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Alexandre Thiéry</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../people/index_people.html" rel="" target="">
 <span class="menu-text">Research Team</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications/index_pubs.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes/index_notes.html" rel="" target="">
 <span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../notes/index_notes_as_list.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Probability Basics</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">probability</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">23 01 2024</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">13 08 2025</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link active" data-scroll-target="#table-of-contents">Table of Contents</a>
  <ul class="collapse">
  <li><a href="#mean-and-expectation" id="toc-mean-and-expectation" class="nav-link" data-scroll-target="#mean-and-expectation">Mean and Expectation</a></li>
  <li><a href="#standard-deviation-and-variances-and-covariances" id="toc-standard-deviation-and-variances-and-covariances" class="nav-link" data-scroll-target="#standard-deviation-and-variances-and-covariances">Standard Deviation and Variances and Covariances</a></li>
  <li><a href="#random-vectors" id="toc-random-vectors" class="nav-link" data-scroll-target="#random-vectors">Random Vectors</a></li>
  <li><a href="#gaussian-distributions" id="toc-gaussian-distributions" class="nav-link" data-scroll-target="#gaussian-distributions">Gaussian distributions</a>
  <ul class="collapse">
  <li><a href="#univariate-case" id="toc-univariate-case" class="nav-link" data-scroll-target="#univariate-case">Univariate case:</a></li>
  <li><a href="#multivariate-case" id="toc-multivariate-case" class="nav-link" data-scroll-target="#multivariate-case">Multivariate case:</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="table-of-contents" class="level1">
<h1>Table of Contents</h1>
<ol type="1">
<li><a href="#mean-and-expectation">Mean and Expectation</a></li>
<li><a href="#standard-deviation-and-variances-and-covariances">Standard Deviation, Variances and Covariances</a></li>
<li><a href="#random-vectors">Random Vectors</a></li>
<li><a href="#gaussian-distributions">Gaussian distributions</a></li>
</ol>
<hr>
<section id="mean-and-expectation" class="level2">
<h2 class="anchored" data-anchor-id="mean-and-expectation">Mean and Expectation</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Expected_value">mean or expectation</a> of a random variable <span class="math inline">\(X\)</span> is denoted as <span class="math inline">\(\mathbb{E}[X]\)</span>l. For a discrete random variable,</p>
<p><span class="math display">\[
\mathbb{E}[X] = \sum_{x} x \cdot \mathbb{P}(X = x)
\]</span></p>
<p>and for a continuous random variable,</p>
<p><span class="math display">\[
\mu_X = \mathbb{E}[X] = \int_{-\infty}^{\infty} x \cdot f(x) \, dx
\]</span></p>
<p>where <span class="math inline">\(f(x)\)</span> is the <a href="https://en.wikipedia.org/wiki/Probability_density_function">probability density function</a> of <span class="math inline">\(X\)</span>. It’s important to note that in some cases, particularly for distributions with <a href="https://en.wikipedia.org/wiki/Heavy-tailed_distribution">“heavy” tails</a>, the mean might not be well-defined. This situation arises in distributions like the <a href="https://en.wikipedia.org/wiki/Cauchy_distribution">Cauchy distribution</a>, where the tails of the distribution do not decay rapidly enough to yield a finite expectation. In such cases, the integrals or sums used to define the mean do not converge.</p>
<p><a href="https://en.wikipedia.org/wiki/Independence_(probability_theory)">Independence</a> is a fundamental concept in probability theory, referring to the relationship between two random variables. Two random variables, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, are said to be independent if the occurrence of an event related to <span class="math inline">\(X\)</span> does not influence the probability of an event related to <span class="math inline">\(Y\)</span>, and vice versa. Mathematically, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent if and only if for every pair of events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, the probability that both <span class="math inline">\(X\)</span> belongs to <span class="math inline">\(A\)</span> and <span class="math inline">\(Y\)</span> belongs to <span class="math inline">\(B\)</span> is the product of their individual probabilities. This can be expressed as:</p>
<p><span class="math display">\[
\mathbb{P}(X \in A \; \text{ and } \; Y \in B) = \mathbb{P}(X \in A) \cdot \mathbb{P}(Y \in B).
\]</span></p>
<p>This can equivalently be expressed as the fact that, for any two functions <span class="math inline">\(F(\cdot)\)</span> and <span class="math inline">\(G(\cdot)\)</span>, the following identity holds</p>
<p><span class="math display">\[
\mathbb{E}[F(X) \cdot G(Y)] \; = \; \mathbb{E}[F(X)] \cdot \mathbb{E}[G(Y)].
\]</span></p>
<p>This definition implies that knowing the outcome of <span class="math inline">\(X\)</span> provides no information about the outcome of <span class="math inline">\(Y\)</span>, and this lack of influence is a key characteristic of independent random variables. One extremely important remark is that, for two random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, the expectation of the sum equals the sum of the expectation,</p>
<p><span class="math display">\[
\mathbb{E}[X+Y] = \mathbb{E}[X] + \mathbb{E}[Y],
\]</span></p>
<p>as soon as all these quantities exists. This holds even if the two random variables are <strong>not</strong> independent.</p>
</section>
<section id="standard-deviation-and-variances-and-covariances" class="level2">
<h2 class="anchored" data-anchor-id="standard-deviation-and-variances-and-covariances">Standard Deviation and Variances and Covariances</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Variance">variance</a> of a random variable <span class="math inline">\(X\)</span>, denoted as <span class="math inline">\(\text{Var}(X)\)</span>, measures the spread of its values. It is defined as</p>
<p><span class="math display">\[
\begin{align}
\text{Var}(X) &amp;= \mathbb{E}[(X - \mu_X )^2] = \mathbb{E}[X^2] - \mu_X ^2\\
&amp;= \int_{-\infty}^{\infty} (x - \mu_X)^2 \cdot f(x) \, dx
\end{align}
\]</span></p>
<p>The <a href="https://en.wikipedia.org/wiki/Standard_deviation">standard deviation</a> is the square root of the variance, denoted as <span class="math inline">\(\sigma_X = \sqrt{\text{Var}(X)}\)</span>. The notion of <a href="https://en.wikipedia.org/wiki/Covariance">covariance</a> measures the linear relationship between two random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. It is defined as</p>
<p><span class="math display">\[
\begin{align}
\text{Cov}(X, Y)
&amp;= \mathbb{E}[(X - \mu_X )(Y - \mu_Y )] = \mathbb{E}[X \, Y] -  \mu_X  \, \mu_Y\\
&amp;= \int_{-\infty}^{\infty} (x - \mu_X)(y-\mu_Y) \cdot f(x, y) \, dx
\end{align}
\]</span></p>
<p>where <span class="math inline">\(f(x,y)\)</span> is the <a href="https://en.wikipedia.org/wiki/Joint_probability_distribution">joined density</a> of the pair of random variables <span class="math inline">\((X,Y)\)</span>. The correlation is defined as a normalized version of the covariance,</p>
<p><span class="math display">\[
\text{Corr}(X,Y) = \textrm{Cov}\left\{ \frac{X - \mu_X}{\sigma_X}, \frac{Y - \mu_Y}{\sigma_Y}\right\}
\]</span></p>
<p>and always satisfies <span class="math inline">\(-1 \leq \text{Corr}(X,Y) \leq 1\)</span>, as is easily proved (exercise). Note that if <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent, then <span class="math inline">\(\text{Cov}(X, Y) = 0\)</span>. However, zero covariance does not imply independence and it is a good exercise to construct such a counter-example. Standard manipulations reveal that for two random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> we have</p>
<p><span class="math display">\[
\text{Var}(X+Y) = \text{Var}(X) + \text{Var}(Y) + \text{Cov}(X, Y),
\]</span></p>
<p>which is indeed the equivalent of the identity <span class="math inline">\((x+y)^2 = x^2 + y^2 + 2xy\)</span>. Importantly, if the two random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent, the variance of the sum equals the sum of the variances, <span class="math inline">\(\text{Var}(X+Y) = \text{Var}(X) + \text{Var}(Y)\)</span>. This also shows that for <span class="math inline">\(N\)</span> independent and identically distributed random variables <span class="math inline">\(X_1, \ldots, X_N\)</span>, we have that</p>
<p><span class="math display">\[
\text{Var}\left\{ \frac{X_1 + \ldots + X_N}{N} \right\} \; = \; \frac{\text{Var}(X)}{N}.
\]</span></p>
</section>
<section id="random-vectors" class="level2">
<h2 class="anchored" data-anchor-id="random-vectors">Random Vectors</h2>
<p>A <a href="https://en.wikipedia.org/wiki/Multivariate_random_variable">random vector</a> is a vector of random variables. For a random vector <span class="math inline">\(\mathbf{X}\)</span> in <span class="math inline">\(\mathbb{R}^d\)</span>, the mean of <span class="math inline">\(\mu = \mathbf{X} \ in \mathbb{R}^d\)</span> is a vector in <span class="math inline">\(\mathbb{R}^d\)</span>, each component of which is the mean of one of its <span class="math inline">\(d\)</span> components. The <a href="https://en.wikipedia.org/wiki/Covariance_matrix">covariance matrix</a>, <span class="math inline">\(\Sigma \in \mathbb{R}^{d,d}\)</span>, of <span class="math inline">\(\mathbf{X}\)</span> is a <span class="math inline">\(d \times d\)</span> matrix defined by</p>
<p><span class="math display">\[
\Sigma_{ij} = \text{Cov}(X_i, X_j)
=
\mathbb{E}[(X_i - \mu_{X_i}) \, (X_j - \mu_{X_j})]
\]</span></p>
<p>where <span class="math inline">\(X_i\)</span> and <span class="math inline">\(X_j\)</span> are the <span class="math inline">\(i\)</span>-th and <span class="math inline">\(j\)</span>-th components of <span class="math inline">\(\mathbf{X}\)</span>, respectively. Each element <span class="math inline">\(\Sigma_{ij}\)</span> represents the covariance between the <span class="math inline">\(i\)</span>-th and <span class="math inline">\(j\)</span>-th components of the vector <span class="math inline">\(\mathbf{X}\)</span>. If the components are independent, the covariance matrix is diagonal. Furthermore, the covariance matrix, when it exists, is always a <a href="https://en.wikipedia.org/wiki/Symmetric_matrix">symmetric</a> and <a href="https://en.wikipedia.org/wiki/Definite_matrix">positive semi-definite</a> matrix.</p>
</section>
<section id="gaussian-distributions" class="level2">
<h2 class="anchored" data-anchor-id="gaussian-distributions">Gaussian distributions</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Normal_distribution">Gaussian</a> distribution, also known as the normal distribution, holds a central place in statistics, probability, and applied mathematics due to several key reasons. Firstly, its mathematical properties are well-understood and conducive to analytical work. Secondly, the <a href="https://en.wikipedia.org/wiki/Central_limit_theorem">Central Limit Theorem</a> states that the sum of a large number of independent, identically distributed variables will approximately follow a Gaussian distribution, regardless of the original distribution. This makes it a fundamental tool for inferential statistics. Furthermore, Gaussian distributions arise naturally in numerous contexts due to random noise and errors often tending to distribute normally. Lastly, since Gaussian distributions are extremely tractable, its properties allow for convenient modeling in various fields.</p>
<section id="univariate-case" class="level3">
<h3 class="anchored" data-anchor-id="univariate-case">Univariate case:</h3>
<p>A univariate <a href="https://en.wikipedia.org/wiki/Normal_distribution">Gaussian</a> (or normal) distribution for a random variable <span class="math inline">\(X\)</span> is characterized by its mean <span class="math inline">\(\mu\)</span> and variance <span class="math inline">\(\sigma^2\)</span>. Its probability density function is given by</p>
<p><span class="math display">\[
f(x) = \frac{1}{\sqrt{2\pi\sigma^2}} \exp\left\{ -\frac{(x - \mu)^2}{2\sigma^2}\right\}
\]</span></p>
<p>The constant <span class="math inline">\(1/\sqrt{2\pi\sigma^2}\)</span> is often written as <span class="math inline">\(1/\mathcal{Z}\)</span> where <span class="math inline">\(\mathcal{Z} = \sqrt{2\pi\sigma^2}\)</span> is referred to as the <a href="https://en.wikipedia.org/wiki/Normalizing_constant">“normalization factor”</a>. It ensures that the density <span class="math inline">\(f(x)\)</span> integrates to one.</p>
</section>
<section id="multivariate-case" class="level3">
<h3 class="anchored" data-anchor-id="multivariate-case">Multivariate case:</h3>
<p>A <a href="https://en.wikipedia.org/wiki/Multivariate_normal_distribution">multivariate Gaussian</a> distribution for a random vector <span class="math inline">\(\mathbf{X}\)</span> in <span class="math inline">\(\mathbb{R}^n\)</span> is characterized by a mean vector <span class="math inline">\(\boldsymbol{\mu}\)</span> and a covariance matrix <span class="math inline">\(\Sigma\)</span>. Its probability density function is</p>
<p><span class="math display">\[
f(\mathbf{x}) = \frac{1}{\sqrt{(2\pi)^n |\Sigma|}} \exp\left\{ -\frac{1}{2} \langle (\mathbf{x} - \boldsymbol{\mu}), \Sigma^{-1} (\mathbf{x} - \boldsymbol{\mu})\rangle \right\}
\]</span></p>
<p>and <span class="math inline">\(|\Sigma|\)</span> is the <a href="https://en.wikipedia.org/wiki/Determinant">determinant</a> of the covariance matrix <span class="math inline">\(\Sigma\)</span>. Crucially, the <strong>inverse</strong> of the covariance matrix is inside the dot product <span class="math inline">\(\langle (\mathbf{x} - \boldsymbol{\mu}), \Sigma^{-1} (\mathbf{x} - \boldsymbol{\mu})\rangle\)</span>. In general, zero correlation between variables does not imply their independence. However, this principle has a notable exception in the case of Gaussian distributions. If two vectors <span class="math inline">\(X,Y\)</span> are such that <span class="math inline">\((X,Y)\)</span> is a Gaussian vector, then zero correlation implies independence. Note that, it is still possible that <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are both Gaussian vectors with zero correlation and yet are not independent; this may happen with the joint vector <span class="math inline">\((X,Y)\)</span> is not Gaussian (although both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are).</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="alexxthiery/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>