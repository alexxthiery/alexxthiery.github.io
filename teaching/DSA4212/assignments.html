<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DSA4212 Assignments – Alexandre Thiéry</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<link href="../../data/dice.png" rel="icon" type="image/png">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2c49a34178fbd84a6f1fb51273f28ac8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HJ0JLEF802"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HJ0JLEF802', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="DSA4212 Assignments – Alexandre Thiéry">
<meta property="og:description" content="Alex Thiery Notes">
<meta property="og:site_name" content="Alexandre Thiéry">
<meta name="twitter:title" content="DSA4212 Assignments – Alexandre Thiéry">
<meta name="twitter:description" content="Alex Thiery Notes">
<meta name="twitter:creator" content="@alexxthiery">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Alexandre Thiéry</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../people/index_people.html"> 
<span class="menu-text">Research Team</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications/index_pubs.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes/index_notes.html"> 
<span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about/about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../notes/index_notes_as_list.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#traveling-salesman-problem-90" id="toc-traveling-salesman-problem-90" class="nav-link active" data-scroll-target="#traveling-salesman-problem-90">Traveling Salesman Problem [90%]</a></li>
  <li><a href="#thompson-problem-90" id="toc-thompson-problem-90" class="nav-link" data-scroll-target="#thompson-problem-90">Thompson problem [90%]</a></li>
  <li><a href="#image-classification-with-convolutional-neural-networks-90" id="toc-image-classification-with-convolutional-neural-networks-90" class="nav-link" data-scroll-target="#image-classification-with-convolutional-neural-networks-90">Image classification with convolutional neural networks [90%]</a></li>
  <li><a href="#automatic-differentiation-90" id="toc-automatic-differentiation-90" class="nav-link" data-scroll-target="#automatic-differentiation-90">Automatic differentiation [90%]</a></li>
  <li><a href="#collaborative-filtering-90" id="toc-collaborative-filtering-90" class="nav-link" data-scroll-target="#collaborative-filtering-90">Collaborative Filtering [90%]</a></li>
  <li><a href="#natural-evolution-strategies-100" id="toc-natural-evolution-strategies-100" class="nav-link" data-scroll-target="#natural-evolution-strategies-100">Natural Evolution Strategies [100%]</a></li>
  <li><a href="#word-embeddings-100" id="toc-word-embeddings-100" class="nav-link" data-scroll-target="#word-embeddings-100">Word Embeddings [100%]</a></li>
  <li><a href="#portfolio-optimization-100" id="toc-portfolio-optimization-100" class="nav-link" data-scroll-target="#portfolio-optimization-100">Portfolio Optimization [100%]</a></li>
  <li><a href="#shampoo-optimizer-100" id="toc-shampoo-optimizer-100" class="nav-link" data-scroll-target="#shampoo-optimizer-100">Shampoo optimizer [100%]</a></li>
  <li><a href="#transformer-architecture-100" id="toc-transformer-architecture-100" class="nav-link" data-scroll-target="#transformer-architecture-100">Transformer architecture [100%]</a></li>
  <li><a href="#topic-of-your-choice" id="toc-topic-of-your-choice" class="nav-link" data-scroll-target="#topic-of-your-choice">Topic of your choice</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DSA4212 Assignments</h1>
  <div class="quarto-categories">
    <div class="quarto-category">DSA4212</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="traveling-salesman-problem-90" class="level3">
<h3 class="anchored" data-anchor-id="traveling-salesman-problem-90">Traveling Salesman Problem [90%]</h3>
<p><strong>Goal:</strong> The Traveling Salesman Problem (TSP) is a classic problem in combinatorial optimization. Given a list of cities and the distances between each pair of cities, the problem is to find the shortest possible route that visits each city exactly once and returns to the origin city. You are tasked with implementing a few methods to solve the TSP and compare their performance. Your report should not include any actual code. Instead, it should describe the problem and provide a discussion of the results. You are encouraged to compare your results with the best known solutions.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">Wikipedia</a></li>
<li><a href="http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/">TSPLIB</a></li>
</ul>
<hr>
</section>
<section id="thompson-problem-90" class="level3">
<h3 class="anchored" data-anchor-id="thompson-problem-90">Thompson problem [90%]</h3>
<p><strong>Goal:</strong> The Thompson problem is a classic problem in computational geometry. Consider <code>N = 300</code> points <span class="math inline">\(P_1, P_2, \ldots, P_N \in \mathbb{R}^3\)</span> on the unit sphere: for <span class="math inline">\(1 \leq i \leq N\)</span>, we have <span class="math inline">\(\|P_i\| = 1\)</span>. How should these points be placed so that the quantity</p>
<p><span class="math display">\[
E = \sum_{i=1}^{N} \sum_{j=1}^{N} \frac{1}{\|P_i - P_j\|}
\]</span></p>
<p>is minimized. Note that it is the norm, and not the norm squared, in the denominator. Your report should not include any actual code. Instead, it should describe the problem and provide a discussion of the results. You are encouraged to compare your results with the best known solutions.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Thomson_problem">Wikipedia</a></li>
</ul>
<hr>
</section>
<section id="image-classification-with-convolutional-neural-networks-90" class="level3">
<h3 class="anchored" data-anchor-id="image-classification-with-convolutional-neural-networks-90">Image classification with convolutional neural networks [90%]</h3>
<p><strong>Goal:</strong> Implement a simple convolutional neural network in Python and use it to classify images from the CIFAR-10 dataset. For this purpose, you will implement a small CNN on a GPU (eg. Google Colab) – the actual details of the CNN is not the emphasis of this assignment and you should not spend too much time optimizing the architecture. Instead, you will study:</p>
<ul>
<li>the influence of the choice of optimizer<br>
</li>
<li>the effect of the learning rate on the speed of convergence and the final test accuracy<br>
</li>
<li>whether using a learning rate schedule improves performance<br>
</li>
<li>the effect of the batch size on the speed of convergence and the final test accuracy</li>
<li>influence and importance of data augmentation</li>
</ul>
<p>Your report should not include any actual code. Instead, it should describe your experiments and their results, and provide a discussion of the findings.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://arxiv.org/abs/1708.07120">Super-Convergence: Very Fast Training of Neural Networks Using Large Learning Rates</a><br>
</li>
<li><a href="https://myrtle.ai/learn/how-to-train-your-resnet/">How to train your ResNet</a></li>
<li><a href="https://github.com/google-research/tuning_playbook">Deep Learning Tuning Playbook</a></li>
</ul>
<hr>
</section>
<section id="automatic-differentiation-90" class="level3">
<h3 class="anchored" data-anchor-id="automatic-differentiation-90">Automatic differentiation [90%]</h3>
<p><strong>Goal:</strong> Implement a simple version of automatic differentiation in Python. Your implementation should be able to easily compute the gradient of the composition of any number of (simple) multivariate functions. While your report should not include any actual code, it should describe the mechanics of your implementation and provide examples of its use.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Automatic_differentiation">Automatic Differentiation</a><br>
</li>
<li><a href="https://youtu.be/VMj-3S1tku0?si=1aVPrUNfLoSfAFGk">Andrej Karpathy</a><br>
</li>
<li><a href="https://youtu.be/wG_nF1awSSY?si=-0uxHzNaO8b5xI4u">Ari Seff</a><br>
</li>
<li><a href="https://colah.github.io/posts/2015-08-Backprop/">Chris Olah</a></li>
</ul>
<hr>
</section>
<section id="collaborative-filtering-90" class="level3">
<h3 class="anchored" data-anchor-id="collaborative-filtering-90">Collaborative Filtering [90%]</h3>
<p><strong>Goal:</strong> Implement a collaborative filtering algorithm in Python from scratch – you should not use any high-level library such as <code>surprise</code> since this would defeat the purpose of the assignment. For testing your implementation, you will use the song dataset available <a href="https://www.kaggle.com/datasets/rymnikski/dataset-for-collaborative-filters">here</a>. You are tasked to implement the matrix factorization algorithm discussed in class, propose improvements, and compare your implementations with a number of baselines approaches. The challenge of this assignment is to implement the algorithm in scalable manner.</p>
<hr>
</section>
<section id="natural-evolution-strategies-100" class="level3">
<h3 class="anchored" data-anchor-id="natural-evolution-strategies-100">Natural Evolution Strategies [100%]</h3>
<p>The class of algorithms known as NaturalEvolutionStrategies (NES) has demonstrated significant potential in various fields of applied mathematics and machine learning. In this project, you will provide an overview of NES and apply these approaches to three optimization problems of your choice. Your report should not include any actual code. Instead, it should describe what NES are, how they work, and provide a discussion of the results.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://arxiv.org/abs/1106.3708">Information-geometric optimization algorithms: A unifying pic- ture via invariance principles</a><br>
</li>
<li><a href="https://arxiv.org/abs/1703.03864">Evolution Strategies as a Scalable Alternative to Reinforcement Learning</a><br>
</li>
<li><a href="https://lilianweng.github.io/posts/2019-09-05-evolution-strategies/">Evolution Strategies</a></li>
<li><a href="https://www.jmlr.org/papers/volume15/wierstra14a/wierstra14a.pdf">Natural Evolution Strategies</a></li>
</ul>
<hr>
</section>
<section id="word-embeddings-100" class="level3">
<h3 class="anchored" data-anchor-id="word-embeddings-100">Word Embeddings [100%]</h3>
<p><strong>Goal:</strong> Implement a simple word embedding in Python (from scratch) and use it to find the most similar words to a given word. Your report should not include any actual code. Instead, it should describe how word embeddings work, how you implemented it, and provide a discussion of the results. For this purpose, you need to come up with a dataset, as well as evaluation metrics to assess the quality of your embeddings.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLhWB2ZsrULv-wEM8JDKA1zk8_2Lc88I-s">Andrew Ng</a><br>
</li>
<li><a href="https://youtu.be/ISPId9Lhc1g?si=gJC_GF7Oj0sq9GVD">The illustrated Word2Vec</a></li>
</ul>
<hr>
</section>
<section id="portfolio-optimization-100" class="level3">
<h3 class="anchored" data-anchor-id="portfolio-optimization-100">Portfolio Optimization [100%]</h3>
<p><strong>Goal:</strong> You are tasked with implementing the mean-variance portfolio optimization framework. Your objective is to either maximize returns for a given level of risk or minimize risk for a desired return level. For this assignment:</p>
<ul>
<li><p><strong>Data Collection:</strong> Download historical financial data to estimate the expected returns, volatilities (standard deviations) of asset returns, and the covariance matrix of asset returns. You are required to optimize a portfolio of at least 50 stocks</p></li>
<li><p><strong>Optimization:</strong> You must use the <a href="https://www.cvxpy.org">CVXPY Python library</a> to implement and solve the mean-variance optimization. The goal is to determine the optimal portfolio weights that balance risk and return.</p>
<ul>
<li>Efficient Frontier: Calculate and plot the efficient frontier, which represents the set of optimal portfolios for different risk-return trade-offs.</li>
<li>Stability of Solutions: Study how stable the solutions are by testing your results across different time windows and datasets. Consider the impact of changes in volatility and return estimates on portfolio stability.</li>
</ul></li>
<li><p><strong>Discussion:</strong> Reflect on the limitations of the mean-variance framework, particularly with respect to the sensitivity of the results with respect to the inputs.</p></li>
</ul>
<hr>
</section>
<section id="shampoo-optimizer-100" class="level3">
<h3 class="anchored" data-anchor-id="shampoo-optimizer-100">Shampoo optimizer [100%]</h3>
<p><strong>Goal:</strong> Shampoo is a very recent second-order-like optimizer that has shown great promise in training deep neural networks such as Large Language Models. The optimizer was named “Shampoo” as it attempts to build a good preconditioner for the optimization problem. The purpose of this assignment is to implement the Shampoo optimizer in Python + Jax and compare its performance with other optimizers such as Adam, SGD, and RMSprop. Your report should not include any actual code. Instead, it should describe how Shampoo works, how you implemented it, and provide a discussion of the results. It is not necessary to understand all the theoretical details of Shampoo, but you should be able to explain the main ideas behind it.</p>
<p><strong>References:</strong><br>
- <a href="https://arxiv.org/abs/1802.09568">Shampoo: Preconditioned Stochastic Tensor Optimization</a><br>
- <a href="https://arxiv.org/abs/2406.17748">A New Perspective on Shampoo’s Preconditioner</a><br>
- <a href="https://arxiv.org/abs/2409.11321">SOAP: improving and stabilizing shampoo using adam</a><br>
- <a href="https://arxiv.org/abs/2309.06497">A Distributed Data-Parallel PyTorch Implementation</a></p>
<hr>
</section>
<section id="transformer-architecture-100" class="level3">
<h3 class="anchored" data-anchor-id="transformer-architecture-100">Transformer architecture [100%]</h3>
<p><strong>Goal:</strong> Implement a simple transformer in Python and from scratch, ie. not use the <code>Transformer(...)</code> function of a high-level library.</p>
<p>Some examples of simple task that can be used to test the transformer are:</p>
<ul>
<li>Sequence Reversal: reversing a sequences of numbers, <code>[1,3,2,4,5,3] -&gt; [3,5,4,2,3,1]</code>.<br>
</li>
<li>Basic Arithmetic: learning simple arithmetic operation is a surprisingly challenging task for a transformer. For example, given a sequence of numbers and arithmetic operations, the model should output the result of the operations. <code>[1,3,2,"+",9,4,2]-&gt;[1,0,7,4]</code>. <code>[1,3,2,"+",9,4,2]-&gt;[1,0,7,4]</code><br>
</li>
<li>Copying Task: A simple task where the model’s objective is to output the same sequence it receives as input. This might seem trivial but is a good starting point: <code>[1,3,2,4,5,3]-&gt;[1,3,2,4,5,3]</code><br>
</li>
<li>Sorting Numbers: This can be very challenging for a transformer, especially if the sequence is long. <code>[1,3,2,4,5,3]-&gt;[1,2,3,3,4,5]</code><br>
</li>
<li>Character-Level Text Generation: Generating text one character at a time, based on a given prompt or starting character.</li>
</ul>
<p>Your report should not include any actual code. Instead, it should describe how a transformer works, how you implemented it, and provide a discussion of the results.</p>
<p><strong>Possible References:</strong></p>
<ul>
<li><a href="http://nlp.seas.harvard.edu/2018/04/03/attention.html">The Annotated Transformer</a><br>
</li>
<li><a href="https://colab.research.google.com/github/phlippe/uvadlc_notebooks/blob/master/docs/tutorial_notebooks/JAX/tutorial6/Transformers_and_MHAttention.ipynb">JAX: Transformers and Multi-Head Attention</a></li>
<li><a href="https://jaykmody.com/blog/gpt-from-scratch/">GPT in 60 lines of code</a></li>
<li><a href="https://lilianweng.github.io/posts/2023-01-27-the-transformer-family-v2/">The Transformer Family</a></li>
<li><a href="https://jalammar.github.io/illustrated-transformer/">The Illustrated Transformer</a></li>
<li><a href="https://youtu.be/U0s0f995w14?si=iRHalYWe_2l-WKKP">pytorch transformer from scratch</a><br>
</li>
<li><a href="https://youtu.be/rPFkX5fJdRY?si=xX0zbInQ7e8GG1lh">Transformers: Zero to Hero</a></li>
</ul>
<hr>
</section>
<section id="topic-of-your-choice" class="level3">
<h3 class="anchored" data-anchor-id="topic-of-your-choice">Topic of your choice</h3>
<p>Propose a topic and contact me to discuss it and for approval.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/alexxthiery\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>